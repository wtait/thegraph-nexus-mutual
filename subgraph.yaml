specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - name: ContractRegister
    kind: ethereum/contract
    network: mainnet
    source:
      address: "0x08C3A887865684f30351A0Ba6d683Aa9b539829a"
      abi: ContractRegister
      startBlock: 7815848
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - NexusContractList
      abis:
        - name: ContractRegister
          file: ./abis/ContractRegister.json
      callHandlers:
        - function: addNewVersion(address[])
          handler: updateContracts
      file: ./src/mappingContractRegister.ts
  - name: TokenRegistry
    kind: ethereum/contract
    network: mainnet
    source:
      abi: TokenRegistry
      address: '0x7f751820be4b1e44464268c425af6095995e045a'
      startBlock: 75563
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/mappingNXMToken.ts
      entities:
        - NXMToken
      abis:
        - name: TokenRegistry
          file: ./abis/TokenRegistry.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: 'Unknown(indexed bytes,indexed bytes)'
          topic0: '0xa9e319c3b10db96c5cee4bc3ebffa9c5581f222f14a4deb0df7ec2088ccd0974'
          handler: initRegistry
templates:
  - name: MemberRoles
    kind: ethereum/contract
    network: mainnet
    source:
      abi: MemberRoles
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Member
      abis:
        - name: MemberRoles
          file: ./abis/MemberRoles.json
      callHandlers:
        - function: payJoiningFee(address)
          handler: handlePayJoiningFee
      file: ./src/mappingMemberRole.ts
  - name: TokenData
    kind: ethereum/contract
    network: mainnet
    source:
      abi: TokenData
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Stake
      abis:
        - name: TokenData
          file: ./abis/TokenData.json
      callHandlers:
        - function: addStake(address,address,uint256)
          handler: handleAddStake
      file: ./src/mappingTokenData.ts
  - name: QuotationData
    kind: ethereum/contract
    network: mainnet
    source:
      abi: QuotationData
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - QuotationData
      eventHandlers:
        - event: CoverDetailsEvent(indexed uint256,address,uint256,uint256,uint256,uint256,bytes4)
          handler: handleCoverDetailsEvent
      abis:
        - name: QuotationData
          file: ./abis/QuotationData.json
      file: ./src/mappingQuotationData.ts
  - name: ClaimsData
    kind: ethereum/contract
    network: mainnet
    source:
      abi: ClaimsData
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - ClaimsData
      eventHandlers:
        - event: VoteCast(indexed address,indexed uint256,indexed bytes4,uint256,uint256,int8)
          handler: handleVoteCast
        - event: ClaimRaise(indexed uint256,indexed address,uint256,uint256)
          handler: handleClaimRaise
      abis:
        - name: ClaimsData
          file: ./abis/ClaimsData.json
      file: ./src/mappingClaimsData.ts
  - name: TokenController
    kind: ethereum/contract
    network: mainnet
    source:
      abi: TokenController
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - TokenController
      eventHandlers:
        - event: Burned(indexed address,bytes32,uint256)
          handler: handleBurned
        - event: Unlocked(indexed address,indexed bytes32,uint256)
          handler: handleUnlocked
      abis:
        - name: TokenController
          file: ./abis/TokenController.json
        - name: TokenData
          file: ./abis/TokenData.json
      file: ./src/mappingTokenController.ts
  - name: NXMToken
    kind: ethereum/contract
    network: mainnet
    source:
      abi: NXMToken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - NXMToken
      abis:
        - name: NXMToken
          file: ./abis/NXMToken.json
      callHandlers:
        - function: Transfer(indexed address, indexed address, uint256)
          handler: handleTransfer
      file: ./src/mappingNXMToken.ts
  - name: StandardToken
    kind: ethereum/contract
    network: mainnet
    source:
      abi: ERC20
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/mappingNXMToken.ts
      entities:
        - TransferEvent
      abis:
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
  - name: BurnableToken
    kind: ethereum/contract
    network: mainnet
    source:
      abi: Burnable
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/mappingNXMToken.ts
      entities:
        - BurnEvent
      abis:
        - name: Burnable
          file: ./abis/Burnable.json
      eventHandlers:
        - event: Burn(indexed address,uint256)
          handler: handleBurn
  - name: MintableToken
    kind: ethereum/contract
    network: mainnet
    source:
      abi: Mintable
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      file: ./src/mappingNXMToken.ts
      entities:
        - MintEvent
      abis:
        - name: Mintable
          file: ./abis/Mintable.json
      eventHandlers:
        - event: Mint(indexed address,uint256)
          handler: handleMint